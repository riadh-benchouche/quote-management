{% extends 'partials/layout.html.twig' %}

{% block title %}Facture
{% endblock %}

{% block main %}
	<h1>Facture</h1>

	<table class="table">
		<tbody>
			<tr>
				<th>Id</th>
				<td>{{ facture.id }}</td>
			</tr>
			<tr>
				<th>Client</th>
				<td>{{ facture.client }}</td>
			</tr>
			<tr>
				<td>{{ facture.client.lastname }}
					{{ facture.client.firstname }}</td>
			</tr>
			<tr>
				<td>{{ facture.client.address }}</td>
			</tr>
			<tr>
				<td>{{ facture.client.zipcode }}
					{{ facture.client.city }}</td>
			</tr>
			<tr>
				<td>{{ facture.client.phone }}</td>
			</tr>
			<tr>
				<th>Message</th>
				<td>{{ facture.message }}</td>
			</tr>
			<tr>
				<th>Date</th>
				<td>{{ facture.date ? facture.date|date('Y-m-d') : '' }}</td>
			</tr>
			<tr>
				<th>Echeance</th>
				<td>{{ facture.echeance ? facture.echeance|date('Y-m-d') : '' }}</td>
			</tr>
			<tr>
				<th>Produit</th>
				<th>
					Quantité
				</th>
				<th>
					Prix
				</th>
				<th>
					Tva
				</th>
				<th>
					Total
				</th>
				{% for produit in facture.produitFacture %}
					<tr>

						<td style="width: 25%; padding: 0.5rem; border: 1px solid #000000; text-align: center">{{ produit.produit }}</td>
						<td style="width: 15%; padding: 0.5rem; border: 1px solid #000000; text-align: center">{{ produit.quantity }}</td>
						<td style="width: 20%; padding: 0.5rem; border: 1px solid #000000; text-align: center">{{ produit.price }}€</td>
						<td style="width: 15%; padding: 0.5rem; border: 1px solid #000000; text-align: center">{{ produit.tva }}%</td>
						<td style="width: 25%; padding: 0.5rem; border: 1px solid #000000; text-align: center">{{ (produit.price * produit.quantity * (1 + produit.tva/100))|number_format(2, '.', ' ') }}€</td>
					</tr>
				{% endfor %}
			</tr>
			<tr>
				<th>Montant</th>
				<td>{{ facture.montant }}€</td>
			</tr>
			<tr>
				<th>Status</th>
				<td>{{ facture.status }}</td>
			</tr>
		</tbody>
	</table>

	<ul>
		<li>
			<a href="{{ path('back_app_facture_pdf', {'id': facture.id}) }}">Voir l'aperçu</a>
		</li>
		<li>
			<a href="{{ path('back_app_facture_download', {'id': facture.id}) }}">Télécharger le PDF</a>
		</li>
		<li>
			<a href="{{ path('back_app_facture_send_mail', {'id': facture.id}) }}">Envoyer par e-mail</a>
		</li>
		<li>
			<a href="{{ path('back_app_facture_index') }}">back to list</a>
		</li>
		<li>
			<a href="{{ path('back_app_facture_edit', {'id': facture.id}) }}">edit</a>
		</li>
	</ul>

	{{ include('back/facture/_delete_form.html.twig') }}
{% endblock %}
